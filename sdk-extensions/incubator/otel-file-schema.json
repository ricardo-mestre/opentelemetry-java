{
  "$id": "https://opentelemetry.io/schemas/sdkconfig",
  "title": "OpenTelemetry SDK Configuration",
  "description": "A configuration specification for OpenTelemetry SDKs",
  "type": "object",
  "properties": {
    "sdk": {
      "type": "object",
      "properties": {
        "disabled": { "type": "boolean" },
        "resource": { "$ref": "#/$defs/resource" },
        "attribute_limits": { "$ref": "#/$defs/attribute_limits" },
        "tracer_provider": {
          "type": "object",
          "properties": {
            "span_processors": {
              "type": "array",
              "items": { "$ref": "#/$defs/span_processor" }
            },
            "sampler": { "$ref": "#/$defs/sampler" },
            "span_limits": { "$ref": "#/$defs/span_limits" }
          }
        },
        "meter_provider": {
          "type": "object",
          "properties": {
            "metric_readers": {
              "type": "array",
              "items": { "$ref": "#/$defs/metric_reader" }
            },
            "views": {
              "type": "array",
              "items": { "$ref": "#/$defs/view_entry" }
            }
          }
        },
        "logger_provider": {
          "type": "object",
          "properties": {
            "log_processors": {
              "type": "array",
              "items": { "$ref": "#/$defs/log_processor" }
            }
          }
        },
        "propagators": {
          "type": "array",
          "items": { "$ref": "#/$defs/propagator" }
        }
      }
    }
  },
  "$defs": {
    "resource": {
      "type": "object",
      "properties": {
        "detectors": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": { "type": "string" },
              "excluded_attribute_keys": {
                "type": "array",
                "items": { "type": "string" }
              }
            }
          }
        },
        "attributes": { "type": "object" },
        "schema_url": { "type": "string" }
      }
    },
    "attribute_limits": {
      "type": "object",
      "properties": {
        "attribute_count_limit": { "type": "integer" },
        "attribute_value_length_limit": { "type": "integer" }
      }
    },
    "span_processor": {
      "type": "object",
      "required": ["name"],
      "properties": {
        "name": { "type": "string" }
      },
      "allOf": [
        {
          "if": {
            "properties": {
              "name": { "const": "simple" }
            }
          },
          "then": {
            "required": ["args"],
            "properties": {
              "args": {
                "type": "object",
                "required": ["exporter"],
                "properties": {
                  "exporter": {
                    "$ref": "#/$defs/exporter"
                  }
                }
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "name": { "const": "batch" }
            }
          },
          "then": {
            "required": ["args"],
            "properties": {
              "args": {
                "type": "object",
                "required": ["exporter"],
                "properties": {
                  "exporter": {
                    "$ref": "#/$defs/exporter"
                  },
                  "max_queue_size": { "type": "integer" },
                  "scheduled_delay_millis": { "type": "integer" },
                  "export_timeout_millis": { "type": "integer" },
                  "max_export_batch_size": { "type": "integer" }
                }
              }
            }
          }
        }
      ]
    },
    "sampler": {
      "type": "object",
      "required": ["name"],
      "properties": {
        "name": { "type": "string" },
        "args": {
          "type": "object"
        }
      }
    },
    "span_limits": {
      "type": "object",
      "properties": {
        "attribute_count_limit": { "type": "integer" },
        "attribute_value_length_limit": { "type": "integer" },
        "attribute_count_per_event_limit": { "type": "integer" },
        "attribute_count_per_link_limit": { "type": "integer" },
        "event_count_limit": { "type": "integer" },
        "link_count_limit": { "type": "integer" }
      }
    },
    "metric_reader": {
      "type": "object",
      "required": ["name"],
      "properties": {
        "name": { "type": "string" }
      },
      "allOf": [
        {
          "if": {
            "properties": {
              "name": { "const": "periodic" }
            }
          },
          "then": {
            "required": ["args"],
            "properties": {
              "args": {
                "type": "object",
                "required": ["exporter"],
                "properties": {
                  "exporter": {
                    "$ref": "#/$defs/exporter"
                  },
                  "interval_millis": { "type": "integer" }
                }
              }
            }
          }
        }
      ]
    },
    "view_entry": {
      "type": "object",
      "required": ["selector", "view"],
      "properties": {
        "selector": {
          "type": "object",
          "properties": {
            "instrument_name": { "type": "string" },
            "instrument_type": { "type": "string" },
            "meter_name": { "type": "string" },
            "meter_version": { "type": "string" },
            "meter_schema_url": { "type": "string" }
          }
        },
        "view": {
          "type": "object",
          "properties": {
            "name": { "type": "string" },
            "description": { "type": "string" },
            "aggregation": {
              "type": "object",
              "required": ["name"],
              "properties": {
                "name": { "type": "string" },
                "args": { "type": "object" }
              }
            },
            "attribute_keys": {
              "type": "array",
              "items": { "type": "string" }
            }
          }
        }
      }
    },
    "log_processor": {
      "type": "object",
      "required": ["name"],
      "properties": {
        "name": { "type": "string" }
      },
      "allOf": [
        {
          "if": {
            "properties": {
              "name": { "const": "simple" }
            }
          },
          "then": {
            "required": ["args"],
            "properties": {
              "args": {
                "type": "object",
                "required": ["exporter"],
                "properties": {
                  "exporter": {
                    "$ref": "#/$defs/exporter"
                  }
                }
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "name": { "const": "batch" }
            }
          },
          "then": {
            "required": ["args"],
            "properties": {
              "args": {
                "type": "object",
                "required": ["exporter"],
                "properties": {
                  "exporter": {
                    "$ref": "#/$defs/exporter"
                  },
                  "max_queue_size": { "type": "integer" },
                  "scheduled_delay_millis": { "type": "integer" },
                  "export_timeout_millis": { "type": "integer" },
                  "max_export_batch_size": { "type": "integer" }
                }
              }
            }
          }
        }
      ]
    },
    "propagator": {
      "type": "object",
      "required": ["name"],
      "properties": {
        "name": { "type": "string" },
        "args": { "type": "args" }
      }
    },
    "exporter": {
      "type": "object",
      "required": ["name"],
      "properties": {
        "name": { "type": "string" },
        "args": { "type": "object" }
      }
    }
  }
}